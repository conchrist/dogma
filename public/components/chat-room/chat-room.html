<link rel="import" href="../../../bower/core-drawer-panel/core-drawer-panel.html">
<link rel="import" href="../../../bower/core-ajax/core-ajax.html">
<link rel="import" href="../chat-footer/chat-footer.html">
<link rel="import" href="../../../bower/core-icon/core-icon.html">
<polymer-element name="chat-room" attributes="userid username">
	<template>
		<link rel="stylesheet" href="chat-room.css">
		<core-ajax
			id="logoutajax"
			handleAs="json"
			url="/logout"
			method="POST"
		></core-ajax>
		<core-drawer-panel id="drawerpanel" class="right-drawer">
			<aside drawer class="contacts">
				<button on-click="{{logout}}">Log out<core-icon icon="close"></core-icon></button>
				<h3>Contacts</h3>
		    	<ul>
		    		<template repeat="{{contact in contacts}}">
		    			<li>{{contact}}</li>
		    		</template>
		    	</ul>
		    </aside>
		    <div main>
			    <div class="jumbotron">
			    	<button class="drawerbutton" on-click="{{toggleDrawer}}"><core-icon icon="drawer"></core-icon></button>
		  			<h1>Chat room</h1>
		  		</div>
			  	<article>
				  	<form id="sendForm" on-submit="{{formSubmit}}">
				        <input type="text" id="textField" autocomplete="off" required/>
				        <input type="submit" id="sendButton" class="btn btn-success" Value="Send"/>
				    </form>
				    <ul id="messages">
				    	<template repeat="{{message in messages}}">
				    		<li><span class="username">{{message.from}}</span> {{message.body}}</li>
				    	</template>
				    </ul>
			    </article>
			    <chat-footer></chat-footer>
		    </div>
	    </core-drawer-panel>
	</template>
	<script type="text/javascript" src="chat-room.js"></script>
</polymer-element>